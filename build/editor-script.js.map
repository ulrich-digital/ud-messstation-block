{"version":3,"file":"editor-script.js","mappings":"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","sources":["webpack://ud-messstation-block/./src/js/edit.js","webpack://ud-messstation-block/./src/js/save.js","webpack://ud-messstation-block/external window [\"wp\",\"blockEditor\"]","webpack://ud-messstation-block/external window [\"wp\",\"components\"]","webpack://ud-messstation-block/external window [\"wp\",\"element\"]","webpack://ud-messstation-block/external window \"ReactJSXRuntime\"","webpack://ud-messstation-block/webpack/bootstrap","webpack://ud-messstation-block/webpack/runtime/compat get default export","webpack://ud-messstation-block/webpack/runtime/define property getters","webpack://ud-messstation-block/webpack/runtime/hasOwnProperty shorthand","webpack://ud-messstation-block/webpack/runtime/make namespace object","webpack://ud-messstation-block/./src/js/editor.js"],"sourcesContent":["import {\n\tuseEffect,\n\tuseMemo,\n\tuseState,\n\tuseId,\n\tuseRef,\n} from \"@wordpress/element\";\nimport {\n\tuseBlockProps,\n\tInspectorControls,\n\tInnerBlocks,\n\tRichText,\n} from \"@wordpress/block-editor\";\nimport {\n\tPanelBody,\n\tPanelRow,\n\tSelectControl,\n\tSpinner,\n\tToggleControl,\n} from \"@wordpress/components\";\n\nexport default function Edit({ attributes, setAttributes, clientId }) {\n\n\t/* =============================================================== *\\\n   \t\t1. Block-Props\n\t\\* =============================================================== */\n\tconst { dataUrl, visibleKeys = [] } = attributes;\n\tconst blockProps = useBlockProps();\n\n\t/* =============================================================== *\\\n   \t\t2. Stammdaten / Datei-Auswahl / Labels\n\t\\* =============================================================== */\n\tconst [fileOptions, setFileOptions] = useState([\n\t\t{ label: \"Lade…\", value: \"\" },\n\t]);\n\n\n\tconst [loading, setLoading] = useState(true);\n\tconst [availableKeys, setAvailableKeys] = useState([]);\n\tconst [rows, setRows] = useState([]);\n\tconst [keyLabels, setKeyLabels] = useState({});\n\n\tuseEffect(() => {\n\t\tlet off = false;\n\t\tfetch(\"/wp-json/ud/messstation/scan-json\")\n\t\t\t.then((r) => r.json())\n\t\t\t.then((data) => {\n\t\t\t\tif (off) return;\n\t\t\t\tif (Array.isArray(data)) {\n\t\t\t\t\tsetFileOptions(\n\t\t\t\t\t\tdata.length\n\t\t\t\t\t\t\t? [{ label: \"Bitte auswählen\", value: \"\" }, ...data]\n\t\t\t\t\t\t\t: [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tlabel: \"Keine JSON-Dateien gefunden\",\n\t\t\t\t\t\t\t\t\t\tvalue: \"\",\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t  ],\n\t\t\t\t\t);\n\t\t\t\t} else if (data?.error === \"no_dir_selected\") {\n\t\t\t\t\tsetFileOptions([]);\n\t\t\t\t} else {\n\t\t\t\t\tsetFileOptions([\n\t\t\t\t\t\t{ label: \"Unbekannter Fehler beim Laden\", value: \"\" },\n\t\t\t\t\t]);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(\n\t\t\t\t() =>\n\t\t\t\t\t!off &&\n\t\t\t\t\tsetFileOptions([{ label: \"Fehler beim Laden\", value: \"\" }]),\n\t\t\t)\n\t\t\t.finally(() => !off && setLoading(false));\n\t\treturn () => {\n\t\t\toff = true;\n\t\t};\n\t}, []);\n\n\tuseEffect(() => {\n\t\tlet off = false;\n\t\tif (!dataUrl) {\n\t\t\tsetAvailableKeys([]);\n\t\t\tsetRows([]);\n\t\t\treturn;\n\t\t}\n\t\tfetch(dataUrl)\n\t\t\t.then((r) => r.json())\n\t\t\t.then((json) => {\n\t\t\t\tif (off) return;\n\t\t\t\tif (Array.isArray(json) && json.length) {\n\t\t\t\t\tconst keys = Object.keys(json[0]).filter(\n\t\t\t\t\t\t(k) => k !== \"time\",\n\t\t\t\t\t);\n\t\t\t\t\tsetAvailableKeys(keys);\n\t\t\t\t\tsetRows(json);\n\t\t\t\t} else {\n\t\t\t\t\tsetAvailableKeys([]);\n\t\t\t\t\tsetRows([]);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\tif (!off) {\n\t\t\t\t\tsetAvailableKeys([]);\n\t\t\t\t\tsetRows([]);\n\t\t\t\t}\n\t\t\t});\n\t\treturn () => {\n\t\t\toff = true;\n\t\t};\n\t}, [dataUrl]);\n\n\n\t/* =============================================================== *\\\n\t\t3. Sichtbare Metriken / Zustand\n\t\\* =============================================================== */\n\n\tconst hasWL = visibleKeys.includes(\"waterLevel\");\n\tconst hasDI = visibleKeys.includes(\"discharge\");\n\tconst hasDangerLevel = visibleKeys.includes(\"dangerLevel\"); // ⬅️ hier ergänzen\n\n\tconst [activeEditorMetric, setActiveEditorMetric] = useState(\n\t\thasWL ? \"waterLevel\" : hasDI ? \"discharge\" : null,\n\t);\n\n\tuseEffect(() => {\n\t\tif (hasWL && hasDI) {\n\t\t\tif (\n\t\t\t\tactiveEditorMetric !== \"waterLevel\" &&\n\t\t\t\tactiveEditorMetric !== \"discharge\"\n\t\t\t) {\n\t\t\t\tsetActiveEditorMetric(\"waterLevel\");\n\t\t\t}\n\t\t} else if (hasWL) {\n\t\t\tsetActiveEditorMetric(\"waterLevel\");\n\t\t} else if (hasDI) {\n\t\t\tsetActiveEditorMetric(\"discharge\");\n\t\t} else {\n\t\t\tsetActiveEditorMetric(null);\n\t\t}\n\t}, [hasWL, hasDI]);\n\n\n\t/* =============================================================== *\\\n    \t4. Chart-Vorschau (Editor)\n\t\\* =============================================================== */\n\n\tconst metricCanvasRef = useRef(null);\n\tconst metricInstRef = useRef(null);\n\n\tuseEffect(() => {\n\t\tif (\n\t\t\t!metricCanvasRef.current ||\n\t\t\t!window.udInitMetricChart ||\n\t\t\t!window.Chart\n\t\t)\n\t\t\treturn;\n\n\t\tmetricInstRef.current?.destroy();\n\n\t\tconst active =\n\t\t\tactiveEditorMetric || (hasWL ? \"waterLevel\" : \"discharge\");\n\n\t\tmetricInstRef.current = window.udInitMetricChart(\n\t\t\tmetricCanvasRef.current,\n\t\t\t{\n\t\t\t\turl: dataUrl,\n\t\t\t\thasWL,\n\t\t\t\thasDI,\n\t\t\t\tactive,\n\t\t\t\tlabelByMetric: {\n\t\t\t\t\twaterLevel: keyLabels?.waterLevel || \"Wasserstand\",\n\t\t\t\t\tdischarge: keyLabels?.discharge || \"Abfluss\",\n\t\t\t\t},\n\t\t\t\tunits: { waterLevel: \"m\", discharge: \"m³/s\" },\n\t\t\t\tdaysOverride: 14,\n\t\t\t},\n\t\t);\n\n\t\treturn () => {\n\t\t\tmetricInstRef.current?.destroy();\n\t\t\tmetricInstRef.current = null;\n\t\t};\n\t}, [dataUrl, hasWL, hasDI, activeEditorMetric, keyLabels]);\n\n\tuseEffect(() => {\n\t\tif (metricInstRef.current && activeEditorMetric) {\n\t\t\tmetricInstRef.current.setActive(activeEditorMetric);\n\t\t}\n\t}, [activeEditorMetric]);\n\n\t/* =============================================================== *\\\n\t\t5. Gauge (Gefahrenstufe)\n\t\\* =============================================================== */\n\n\tconst latest = useMemo(() => {\n\t\tif (!Array.isArray(rows) || rows.length === 0) return null;\n\t\treturn rows[rows.length - 1];\n\t}, [rows]);\n\tconst dangerValue =\n\t\tlatest?.dangerLevel != null ? Math.round(latest.dangerLevel) : null;\n\tconst gaugeRef = useRef(null);\n\tconst gaugeInstRef = useRef(null);\n\tconst gaugeId = useId();\n\n\tuseEffect(() => {\n\t\tif (gaugeRef.current && window.udInitDangerLevelGauge) {\n\t\t\twindow.udInitDangerLevelGauge(gaugeRef.current);\n\t\t}\n\t}, [dangerValue, hasDangerLevel]);\n\n\n\t/* =============================================================== *\\\n   \t\t6. Hilfswerte\n\t\\* =============================================================== */\n\n\tconst has = (k) => visibleKeys.includes(k);\n\tconst toggleKey = (key) => (isChecked) => {\n\t\tconst next = isChecked\n\t\t\t? [...visibleKeys, key]\n\t\t\t: visibleKeys.filter((k) => k !== key);\n\t\tsetAttributes({ visibleKeys: next });\n\t};\n\n\tconst tempValue =\n\t\tlatest?.waterTemperature != null\n\t\t\t? `${Math.round(latest.waterTemperature)}°`\n\t\t\t: \"–\";\n\n\treturn (\n\t\t<div {...blockProps}>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title=\"Datei-Auswahl\" initialOpen>\n\t\t\t\t\t{loading ? (\n\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t) : fileOptions.length > 0 ? (\n\t\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t\t<SelectControl\n\t\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tlabel=\"Messdaten-Datei\"\n\t\t\t\t\t\t\t\toptions={fileOptions}\n\t\t\t\t\t\t\t\tvalue={dataUrl}\n\t\t\t\t\t\t\t\tonChange={(value) =>\n\t\t\t\t\t\t\t\t\tsetAttributes({ dataUrl: value })\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</PanelRow>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<p className=\"components-base-control__help\">\n\t\t\t\t\t\t\tBitte zuerst ein Verzeichnis in den{\" \"}\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref=\"/wp-admin/options-general.php?page=ud_messstation_settings\"\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tEinstellungen des Messstation-Blocks\n\t\t\t\t\t\t\t</a>{\" \"}\n\t\t\t\t\t\t\twählen.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t)}\n\t\t\t\t</PanelBody>\n\n\t\t\t\t<PanelBody title=\"Anzuzeigende Parameter\" initialOpen>\n\t\t\t\t\t{availableKeys.includes(\"waterTemperature\") && (\n\t\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tlabel=\"Wassertemperatur (°C)\"\n\t\t\t\t\t\t\t\tchecked={has(\"waterTemperature\")}\n\t\t\t\t\t\t\t\tonChange={toggleKey(\"waterTemperature\")}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</PanelRow>\n\t\t\t\t\t)}\n\n\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\tlabel=\"Messstation\"\n\t\t\t\t\t\t\tchecked={attributes.showStation}\n\t\t\t\t\t\t\tonChange={(val) =>\n\t\t\t\t\t\t\t\tsetAttributes({ showStation: val })\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</PanelRow>\n\t\t\t\t\t{availableKeys.includes(\"dangerLevel\") && (\n\t\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tlabel=\"Gefahrenstufe\"\n\t\t\t\t\t\t\t\tchecked={has(\"dangerLevel\")}\n\t\t\t\t\t\t\t\tonChange={toggleKey(\"dangerLevel\")}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</PanelRow>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{availableKeys.includes(\"waterLevel\") && (\n\t\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tlabel=\"Wasserstand\"\n\t\t\t\t\t\t\t\tchecked={has(\"waterLevel\")}\n\t\t\t\t\t\t\t\tonChange={toggleKey(\"waterLevel\")}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</PanelRow>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{availableKeys.includes(\"discharge\") && (\n\t\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tlabel=\"Abfluss\"\n\t\t\t\t\t\t\t\tchecked={has(\"discharge\")}\n\t\t\t\t\t\t\t\tonChange={toggleKey(\"discharge\")}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</PanelRow>\n\t\t\t\t\t)}\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\n\t\t\t{/* ==== Live-Editor-Ansicht (spiegelt das Frontend) ==== */}\n\n\t\t\t{/* Temperatur */}\n\t\t\t{has(\"waterTemperature\") && (\n\t\t\t\t<section className=\"ud-messstation-output ud-messstation-temperature\">\n\t\t\t\t\t<RichText\n\t\t\t\t\t\ttagName=\"h2\"\n\t\t\t\t\t\tvalue={attributes.tempHeading || \"Wassertemperatur\"}\n\t\t\t\t\t\tonChange={(val) => setAttributes({ tempHeading: val })}\n\t\t\t\t\t\tplaceholder=\"Wassertemperatur\"\n\t\t\t\t\t\tinlineToolbar\n\t\t\t\t\t\tallowedFormats={[]}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"value_container\">\n\t\t\t\t\t\t<div className=\"value\">{tempValue}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</section>\n\t\t\t)}\n\n\t\t\t{/* Messstation: Karte sitzt hier und bleibt editierbar */}\n\t\t\t{attributes.showStation && (\n\t\t\t\t<section className=\"ud-messstation-output ud-messstation-messstation\">\n\t\t\t\t\t<RichText\n\t\t\t\t\t\ttagName=\"h2\"\n\t\t\t\t\t\tvalue={attributes.maessstationHeading || \"Messstation\"}\n\t\t\t\t\t\tonChange={(val) =>\n\t\t\t\t\t\t\tsetAttributes({ maessstationHeading: val })\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplaceholder=\"Messstation\"\n\t\t\t\t\t\tallowedFormats={[]}\n\t\t\t\t\t/>\n\t\t\t\t\t<InnerBlocks\n\t\t\t\t\t\tallowedBlocks={[\"muotamap/single-map\"]}\n\t\t\t\t\t\ttemplate={[[\"muotamap/single-map\"]]}\n\t\t\t\t\t\ttemplateLock=\"insert\"\n\t\t\t\t\t/>\n\t\t\t\t</section>\n\t\t\t)}\n\n\t\t\t{/* Gefahrenstufe (Editor-Hinweis mit Live-Zahl) */}\n\t\t\t{has(\"dangerLevel\") && (\n\t\t\t\t<section className=\"ud-messstation-output ud-messstation-dangerlevel\">\n\t\t\t\t\t<RichText\n\t\t\t\t\t\ttagName=\"h2\"\n\t\t\t\t\t\tvalue={attributes.dangerHeading || \"Gefahrenstufe\"}\n\t\t\t\t\t\tonChange={(val) =>\n\t\t\t\t\t\t\tsetAttributes({ dangerHeading: val })\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplaceholder=\"Gefahrenstufe\"\n\t\t\t\t\t\tallowedFormats={[]}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"ud-dangerlevel-generalhint\">\n\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\ttagName=\"p\"\n\t\t\t\t\t\t\tplaceholder=\"Allgemeiner Hinweistext…\"\n\t\t\t\t\t\t\tvalue={attributes.dangerGeneralHint ?? \"\"}\n\t\t\t\t\t\t\tonChange={(val) =>\n\t\t\t\t\t\t\t\tsetAttributes({ dangerGeneralHint: val })\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"ud-dangerlevel-grid\">\n\t\t\t\t\t\t{/* Gauge links */}\n\t\t\t\t\t\t<div className=\"ud-gauge-wrap\">\n\t\t\t\t\t\t\t<div ref={gaugeRef} className=\"ud-gauge-canvas\" />\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tref={gaugeRef}\n\t\t\t\t\t\t\t\tclassName=\"ud-dangerlevel-gauge\"\n\t\t\t\t\t\t\t\tid={`ud-gauge-${clientId}`} // z. B. über Block-ID eindeutig\n\t\t\t\t\t\t\t\tdata-value={dangerValue || 0}\n\t\t\t\t\t\t\t\tdata-min=\"1\"\n\t\t\t\t\t\t\t\tdata-max=\"5\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div className=\"ud-dangerlevel-current\">\n\t\t\t\t\t\t\t\tAktuelle Stufe:{\" \"}\n\t\t\t\t\t\t\t\t{Number.isFinite(dangerValue)\n\t\t\t\t\t\t\t\t\t? dangerValue\n\t\t\t\t\t\t\t\t\t: \"—\"}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{/* Rechte Spalte: 5 fix definierte Accordion-Felder */}\n\t\t\t\t\t\t<div className=\"ud-dangerlevel-accordion\">\n\t\t\t\t\t\t\t{[0, 1, 2, 3, 4].map((i) => {\n\t\t\t\t\t\t\t\tconst level = attributes.dangerLevels?.[i] ?? {\n\t\t\t\t\t\t\t\t\tdesc: \"\",\n\t\t\t\t\t\t\t\t\tbehav: \"\",\n\t\t\t\t\t\t\t\t\teffects: \"\",\n\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<details\n\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\tclassName=\"ud-dangerlevel-item\"\n\t\t\t\t\t\t\t\t\t\topen={i === 0}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<summary>Stufe {i + 1}</summary>\n\n\t\t\t\t\t\t\t\t\t\t<div className=\"ud-dangerlevel-content\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"ud-dangerlevel-field\">\n\t\t\t\t\t\t\t\t\t\t\t\t<strong>Beschreibung</strong>\n\t\t\t\t\t\t\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\t\t\t\t\t\t\ttagName=\"p\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tinlineToolbar\n\t\t\t\t\t\t\t\t\t\t\t\t\tallowedFormats={[]}\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={level.desc}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(val) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst next = [\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...(attributes.dangerLevels ??\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[]),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnext[i] = {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...next[i],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdesc: val,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdangerLevels: next,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"ud-dangerlevel-field\">\n\t\t\t\t\t\t\t\t\t\t\t\t<strong>Verhalten</strong>\n\t\t\t\t\t\t\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\t\t\t\t\t\t\ttagName=\"p\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tinlineToolbar\n\t\t\t\t\t\t\t\t\t\t\t\t\tallowedFormats={[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"core/bold\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"core/italic\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"core/link\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={level.behav}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(val) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst next = [\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...(attributes.dangerLevels ??\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[]),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnext[i] = {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...next[i],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbehav: val,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdangerLevels: next,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"ud-dangerlevel-field\">\n\t\t\t\t\t\t\t\t\t\t\t\t<strong>Auswirkungen</strong>\n\t\t\t\t\t\t\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\t\t\t\t\t\t\ttagName=\"p\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={level.effects}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(val) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst next = [\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...(attributes.dangerLevels ??\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[]),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnext[i] = {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...next[i],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\teffects: val,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdangerLevels: next,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</details>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</section>\n\t\t\t)}\n\n\t\t\t{/* Wasserstand/Abfluss (Editor-Hinweis) */}\n\t\t\t{(hasWL || hasDI) && (\n\t\t\t\t<section className=\"ud-messstation-output ud-messstation-metric\">\n\t\t\t\t\t<div className=\"ud-metric-header\">\n\t\t\t\t\t\t{/* Wasserstand */}\n\t\t\t\t\t\t{hasWL && (\n\t\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\t\ttagName=\"h2\"\n\t\t\t\t\t\t\t\tclassName={`ud-metric-label wl ${\n\t\t\t\t\t\t\t\t\tactiveEditorMetric === \"waterLevel\"\n\t\t\t\t\t\t\t\t\t\t? \"is-active\"\n\t\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\tvalue={attributes.levelHeading || \"Wasserstand\"}\n\t\t\t\t\t\t\t\tonChange={(val) =>\n\t\t\t\t\t\t\t\t\tsetAttributes({ levelHeading: val })\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tplaceholder=\"Wasserstand\"\n\t\t\t\t\t\t\t\tallowedFormats={[]}\n\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\tsetActiveEditorMetric(\"waterLevel\")\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{/* Trenner */}\n\t\t\t\t\t\t{hasWL && hasDI && (\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclassName=\"ud-metric-sep\"\n\t\t\t\t\t\t\t\tstyle={{ opacity: 0.4, margin: \"0 .5rem\" }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t/\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{/* Abfluss */}\n\t\t\t\t\t\t{hasDI && (\n\t\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\t\ttagName=\"h2\"\n\t\t\t\t\t\t\t\tclassName={`ud-metric-label di ${\n\t\t\t\t\t\t\t\t\tactiveEditorMetric === \"discharge\"\n\t\t\t\t\t\t\t\t\t\t? \"is-active\"\n\t\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\tvalue={attributes.dischargeHeading || \"Abfluss\"}\n\t\t\t\t\t\t\t\tonChange={(val) =>\n\t\t\t\t\t\t\t\t\tsetAttributes({ dischargeHeading: val })\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tplaceholder=\"Abfluss\"\n\t\t\t\t\t\t\t\tallowedFormats={[]}\n\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\tsetActiveEditorMetric(\"discharge\")\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"ud-metric-chart\">\n\t\t\t\t\t\t{(hasWL || hasDI) && (\n\t\t\t\t\t\t\t<section className=\"ud-messstation-output ud-messstation-metric\">\n\t\t\t\t\t\t\t\t<div className=\"ud-metric-header\">\n\t\t\t\t\t\t\t\t\t{/* dein bestehender Header mit RichText h2 usw. bleibt unverändert */}\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div className=\"ud-metric-chart\">\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName=\"ud-metric-canvas\"\n\t\t\t\t\t\t\t\t\t\tdata-role=\"metric\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<canvas\n\t\t\t\t\t\t\t\t\t\t\tref={metricCanvasRef}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"ud-metric-canvas-el\"\n\t\t\t\t\t\t\t\t\t\t\theight=\"240\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</section>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","\n\n\n import { InnerBlocks } from \"@wordpress/block-editor\";\n\n export default function save() {\n   // Speichert die verschachtelten Blöcke im Post-Inhalt,\n   // damit sie in render.php als $content ankommen.\n   return <InnerBlocks.Content />;\n }","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"ReactJSXRuntime\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * editor.js\n *\n * JavaScript für den Block-Editor (Gutenberg).\n * Wird ausschließlich im Backend geladen.\n *\n * Hinweis:\n * Diese Datei enthält editor-spezifische Interaktionen oder React-Komponenten.\n * Wird über webpack zu editor.js gebündelt und in block.json oder enqueue.php eingebunden.\n */\n\nimport edit from './edit';\nimport save from './save';\nimport metadata from '../../block.json';\n\nwp.blocks.registerBlockType(metadata.name, {\n    ...metadata,\n    edit,\n    save,\n});\n"],"names":["useEffect","useMemo","useState","useId","useRef","useBlockProps","InspectorControls","InnerBlocks","RichText","PanelBody","PanelRow","SelectControl","Spinner","ToggleControl","jsx","_jsx","jsxs","_jsxs","Edit","attributes","setAttributes","clientId","_attributes$dangerGen","dataUrl","visibleKeys","blockProps","fileOptions","setFileOptions","label","value","loading","setLoading","availableKeys","setAvailableKeys","rows","setRows","keyLabels","setKeyLabels","off","fetch","then","r","json","data","Array","isArray","length","error","catch","finally","keys","Object","filter","k","hasWL","includes","hasDI","hasDangerLevel","activeEditorMetric","setActiveEditorMetric","metricCanvasRef","metricInstRef","current","window","udInitMetricChart","Chart","destroy","active","url","labelByMetric","waterLevel","discharge","units","daysOverride","setActive","latest","dangerValue","dangerLevel","Math","round","gaugeRef","gaugeInstRef","gaugeId","udInitDangerLevelGauge","has","toggleKey","key","isChecked","next","tempValue","waterTemperature","children","title","initialOpen","__next40pxDefaultSize","__nextHasNoMarginBottom","options","onChange","className","href","target","rel","checked","showStation","val","tagName","tempHeading","placeholder","inlineToolbar","allowedFormats","maessstationHeading","allowedBlocks","template","templateLock","dangerHeading","dangerGeneralHint","ref","id","Number","isFinite","map","i","_attributes$dangerLev","level","dangerLevels","desc","behav","effects","open","_attributes$dangerLev2","_attributes$dangerLev3","_attributes$dangerLev4","levelHeading","onClick","style","opacity","margin","dischargeHeading","height","save","Content","edit","metadata","wp","blocks","registerBlockType","name"],"sourceRoot":""}